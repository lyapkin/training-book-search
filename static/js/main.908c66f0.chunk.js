(this.webpackJsonptest=this.webpackJsonptest||[]).push([[0],{29:function(e,t,a){},30:function(e,t,a){},34:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a.n(c),o=a(15),r=a.n(o),s=(a(29),a(30),a(5)),i=a(18),l=a(24),j=a(23),u=a(4),d="GET_BOOKS_REQUEST",b="GET_BOOKS_SUCCESS",h="GET_BOOKS_FAILURE",O="GET_MORE_BOOKS_REQUEST",g="GET_MORE_BOOKS_SUCCESS",f="GET_MORE_BOOKS_FAILURE",m="CHANGE_DATA",v={loading:!1,data:{books:[],totalItems:0},error:null},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return Object(u.a)(Object(u.a)({},e),{},{data:t.payload});case d:return Object(u.a)(Object(u.a)({},e),{},{loading:!0,data:{books:[],totalItems:0}});case O:return Object(u.a)(Object(u.a)({},e),{},{loading:!0});case b:return{loading:!1,data:t.payload,error:null};case g:return{loading:!1,data:Object(u.a)(Object(u.a)({},e.data),{},{books:[].concat(Object(j.a)(e.data.books),Object(j.a)(t.payload))}),error:null};case h:return{loading:!1,data:{books:[],totalItems:0},error:t.payload};case f:return Object(u.a)(Object(u.a)({},e),{},{loading:!1,error:t.payload});default:return e}},x="GET_ONE_BOOK_REQUEST",y="GET_ONE_BOOK_SUCCESS",k="GET_ONE_BOOK_FAILURE",_={loading:!1,book:{},error:null},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object(u.a)(Object(u.a)({},e),{},{loading:!0});case y:return{loading:!1,book:t.payload,error:null};case k:return{loading:!1,book:{},error:t.payload};default:return e}},E=Object(i.b)({data:p,oneBook:S}),I=Object(i.c)(E,Object(i.a)(l.a)),w=a(10),C=a(3),B=a(11),N="AIzaSyDYND6KXstB3nylwAjVCC0ouUqxoVoFn7E",T=function(e,t){return t?function(t,a){t({type:O});var c=a().data.data.books.length;fetch("https://www.googleapis.com/books/v1/volumes?q=".concat(e.searchString,"+subject:").concat(e.category,"&orderBy=").concat(e.order,"&projection=lite&startIndex=").concat(c,"&maxResults=30&fields=totalItems,items(id,volumeInfo(title,authors,imageLinks))&key=").concat(N)).then((function(e){if(e.ok)return e.json();throw new Error(e.status)})).then((function(e){var a;t((a=e.items,{type:g,payload:a}))})).catch((function(e){var a;t((a=e.message,{type:f,payload:a}))}))}:function(t,a){t({type:d});var c="https://www.googleapis.com/books/v1/volumes?q=".concat(e.searchString,"+subject:").concat(e.category,"&orderBy=").concat(e.order,"&projection=lite&startIndex=").concat(0,"&maxResults=30&fields=totalItems,items(id,volumeInfo(title,authors,imageLinks))&key=").concat(N);fetch(c).then((function(e){if(e.ok)return e.json();throw new Error(e.status)})).then((function(e){var a={books:e.items,totalItems:e.totalItems};t(function(e){return{type:b,payload:e}}(a))})).catch((function(e){var a;t((a=e.message,{type:h,payload:a}))}))}},F=(a(34),a(1)),R=function(){var e=Object(c.useState)(!1),t=Object(B.a)(e,2),a=t[0],n=t[1],o=Object(c.useState)({searchString:"",category:"",order:"relevance"}),r=Object(B.a)(o,2),i=r[0],l=r[1],j=Object(C.f)(),d=Object(C.g)(),b=Object(s.b)();Object(c.useEffect)((function(){if(""!==d.search){var e=new URLSearchParams(d.search);l({searchString:e.get("q"),category:e.get("category"),order:e.get("orderBy")})}}),[d.search]);return Object(F.jsxs)("header",{className:"header",children:[Object(F.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""!==i.searchString.trim()?(j.push({pathname:"/training-book-search",search:"?q=".concat(i.searchString,"&category=").concat(i.category,"&orderBy=").concat(i.order)},{books:[],totalItems:0}),b(T(i,!1))):(n(!0),setTimeout((function(){return n(!1)}),5e3))},children:[Object(F.jsxs)("div",{className:"header__search",children:[Object(F.jsx)("input",{type:"search",onChange:function(e){return l(Object(u.a)(Object(u.a)({},i),{},{searchString:e.target.value}))},value:i.searchString}),Object(F.jsx)("button",{type:"submit",children:"Find"})]}),Object(F.jsxs)("div",{className:"header__filter",children:[Object(F.jsxs)("div",{className:"header__categories",children:[Object(F.jsx)("label",{htmlFor:"categories",children:"Categories"}),Object(F.jsxs)("select",{id:"categories",value:i.category,onChange:function(e){return l(Object(u.a)(Object(u.a)({},i),{},{category:e.target.value}))},children:[Object(F.jsx)("option",{value:"",children:"All"}),Object(F.jsx)("option",{value:"art",children:"Art"}),Object(F.jsx)("option",{value:"biography",children:"Biography"}),Object(F.jsx)("option",{value:"computers",children:"Computers"}),Object(F.jsx)("option",{value:"history",children:"History"}),Object(F.jsx)("option",{value:"medical",children:"Medical"}),Object(F.jsx)("option",{value:"poetry",children:"Poetry"})]})]}),Object(F.jsxs)("div",{className:"header__order",children:[Object(F.jsx)("label",{htmlFor:"sort",children:"Sorting by"}),Object(F.jsxs)("select",{id:"sort",value:i.order,onChange:function(e){return l(Object(u.a)(Object(u.a)({},i),{},{order:e.target.value}))},children:[Object(F.jsx)("option",{value:"relevance",children:"Relevance"}),Object(F.jsx)("option",{value:"newest",children:"Newest"})]})]})]})]}),a?Object(F.jsx)("div",{children:"Fill the input"}):null]})},L=(a(38),function(){var e=Object(s.c)((function(e){return e.data.data.books})),t=Object(s.c)((function(e){return e.data.data.totalItems})),a=Object(C.f)(),n=Object(C.g)(),o=Object(s.b)();Object(c.useEffect)((function(){var c;0===(null===(c=n.state)||void 0===c?void 0:c.totalItems)&&a.replace("/training-book-search/".concat(n.search),{books:e,totalItems:t})}),[e]),Object(c.useEffect)((function(){var e,t;(null===(e=n.state)||void 0===e?void 0:e.totalItems)&&o((t=n.state,{type:m,payload:t}))}),[n.search]);var r=e.map((function(e){return Object(F.jsxs)("article",{className:"booklist__item",children:[Object(F.jsx)("img",{src:e.volumeInfo.imageLinks?e.volumeInfo.imageLinks.thumbnail:"",alt:""}),Object(F.jsx)(w.b,{to:"/training-book-search/".concat(e.id),children:e.volumeInfo.title}),Object(F.jsxs)("span",{children:["Authors: ",e.volumeInfo.authors?e.volumeInfo.authors.join(", "):""]}),Object(F.jsxs)("span",{children:["Category: ",e.volumeInfo.mainCategory]})]},e.id)}));return Object(F.jsxs)("section",{className:"search-result",children:[t?Object(F.jsxs)("div",{children:["Found ",t," results"]}):null,Object(F.jsx)("div",{className:"booklist",children:r})]})}),A=(a(39),function(){var e=Object(s.c)((function(e){return e.data.data})),t=Object(s.b)(),a=Object(C.g)();return e.books.length<e.totalItems?Object(F.jsx)("div",{className:"load-more",children:Object(F.jsx)("button",{onClick:function(){var e=new URLSearchParams(a.search),c={searchString:e.get("q"),category:e.get("category"),order:e.get("orderBy")};t(T(c,!0))},children:"Load more"})}):null});var U=function(){var e=Object(s.c)((function(e){return e.data.loading})),t=Object(s.c)((function(e){return e.data.error})),a=Object(s.c)((function(e){return e.data.data.books}));return Object(F.jsxs)("div",{children:[e&&"loading",t,a.length>0&&Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(L,{}),Object(F.jsx)(A,{})]})]})},G=(a(40),function(){var e=Object(C.h)().id,t=Object(c.useState)({}),a=Object(B.a)(t,2),n=a[0],o=a[1],r=Object(c.useState)(!1),s=Object(B.a)(r,2),i=s[0],l=s[1],j=Object(c.useState)(null),u=Object(B.a)(j,2),d=u[0],b=u[1];Object(c.useEffect)((function(){l(!0),fetch("https://www.googleapis.com/books/v1/volumes/".concat(e,"?key=").concat(N)).then((function(e){if(e.ok)return e.json();throw new Error(e.status)})).then((function(e){o(e.volumeInfo)})).catch((function(e){b(e.message)})).finally((function(){return l(!1)}))}),[]);var h=n.title?Object(F.jsxs)("div",{className:"book",children:[Object(F.jsx)("img",{src:n.imageLinks.thumbnail,alt:""}),Object(F.jsx)("h2",{children:n.title}),Object(F.jsxs)("p",{className:"book__categories",children:["Categories: ",n.categories?n.categories.join("/"):null]}),Object(F.jsxs)("p",{className:"book__authors",children:["Authors: ",n.authors?n.authors.join(", "):null]}),Object(F.jsxs)("div",{className:"book__description",children:[Object(F.jsx)("span",{children:"Description:"}),Object(F.jsx)("p",{children:n.description})]})]}):null;return Object(F.jsx)("section",{children:i?"loading":d||h})});var K=function(){return Object(F.jsx)(s.a,{store:I,children:Object(F.jsxs)(w.a,{children:[Object(F.jsx)(R,{}),Object(F.jsxs)(C.c,{children:[Object(F.jsx)(C.a,{exact:!0,path:"/training-book-search",children:Object(F.jsx)(U,{})}),Object(F.jsx)(C.a,{path:"/training-book-search/:id",children:Object(F.jsx)(G,{})})]})]})})},q=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,42)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,o=t.getLCP,r=t.getTTFB;a(e),c(e),n(e),o(e),r(e)}))};r.a.render(Object(F.jsx)(n.a.StrictMode,{children:Object(F.jsx)(K,{})}),document.getElementById("root")),q()}},[[41,1,2]]]);
//# sourceMappingURL=main.908c66f0.chunk.js.map